# ADR-0005: defer-actionplan-version-discriminator

## Created At

2026-02-23 03:44 KST

## Status

Confirmed

## Context

`.specs/ai_agent_spec.md`의 ADR-0003 ActionPlan 계약을 반영하는 과정에서, 파라미터 변경은 v2+에서만 허용한다는 확장 정책은 존재하지만 버전 판별자를 어디에 두고 어떤 필드명과 판별 방식을 사용할지에 대한 규칙은 아직 정의되어 있지 않다는 공백이 확인되었다. 이 상태에서 v2+ 확장을 동시에 추진하면 구현 간 해석이 분기되어 하위호환 경계와 검증 규칙이 불안정해질 수 있어, 즉시 적용 가능한 저영향 의사결정이 필요했다.

## Decision

ActionPlan의 버전 판별자 위치·필드·판별 방식은 TBD로 명시하고 v2+ 롤아웃은 해당 정의를 확정하는 별도 스펙 이슈가 선행될 때까지 보류하기로 결정한다.

## Rationale

대안 1은 현재 시점에 임시 판별자(예: `version` 필드)를 즉시 고정하는 방법이지만, 근거 스펙 없이 성급히 고정하면 이후 정식 설계 시 재마이그레이션 비용과 계약 충돌 위험이 커져 기각했다. 대안 2는 판별자 정의 없이도 팀별 관례로 v2+ 구현을 병행하는 방법이지만, 구현체마다 해석이 달라져 검증 실패 원인 추적과 상호운용성이 악화될 가능성이 높아 기각했다. 대안 3은 현행 v1 정책을 유지하면서 판별자 정의를 TBD로 명확히 남기고 별도 스펙 이슈를 선행 조건으로 두는 방법이며, 변경을 되돌리기 쉽고 운영 영향이 가장 낮아 현재 단계의 가역적 기본값으로 채택했다.
