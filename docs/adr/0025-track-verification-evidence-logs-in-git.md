# ADR-0025: track-verification-evidence-logs-in-git

## Created At

2026-02-25 02:05 KST

## Status

Confirmed

## Context

staging VNet 실환경 smoke 검증에서 `.agents/logs/verification/**` 하위에 실행 증거를 남기고 있으나, 기존 `.gitignore`의 `*.log` 규칙으로 인해 해당 로그가 기본적으로 추적되지 않아 리뷰어가 동일 증거를 브랜치에서 직접 재확인하기 어려운 문제가 있었다. 이번 이슈에서는 `http_code`, stdout JSONL, 파일 append, 민감정보 비노출 여부를 모두 증거 파일로 남겨야 하므로, 증거 경로의 추적 가능성 자체가 재현성 요구사항의 일부가 되었다. 동시에 증거 로그에는 운영 출력이 포함되므로 보안 노출과 저장소 용량 증가 리스크를 함께 통제해야 했다.

## Decision

`.agents/logs/verification/**` 경로는 git에서 추적 가능하도록 유지하고, 민감정보 마스킹 규칙을 전제로 실환경 검증 증거 재현성을 보장하는 운영 기준으로 결정한다.

## Rationale

이 선택은 리뷰 단계에서 증거 파일 자체를 동일 커밋 맥락에서 재검토할 수 있어, 수동 재현 의존도를 줄이고 DoD 검증 가능성을 높인다. 또한 이번 smoke 스크립트는 `response_summary`에서 token/cookie/set-cookie 원문을 제거하도록 설계되어 있어, 증거 파일 추적 시 민감정보 직접 노출 위험을 낮출 수 있다. 다만 로그 누적으로 저장소 용량이 증가할 수 있으므로, 증거는 이슈 범위 내 최소 생성 원칙을 적용하고 불필요한 중간 산출물은 남기지 않는 운영 통제를 병행한다.

기각한 대안은 다음과 같다. 첫째, 기존대로 `*.log` 무시 정책을 유지하고 로컬에만 증거를 보관하는 방안은 저장소 오염은 줄이지만, 리뷰어/후속 담당자가 동일 증거를 브랜치에서 확인할 수 없어 재현성과 감사 가능성이 떨어져 기각했다. 둘째, 증거를 별도 외부 스토리지(예: 공유 버킷, 티켓 첨부)로만 관리하는 방안은 본문 히스토리와 분리되어 추적 경로가 이원화되고 접근권한/보존정책 의존성이 생겨, 이슈 단위 검증 흐름을 단순하게 유지해야 하는 현재 운영 목표와 맞지 않아 기각했다. 셋째, 로그 본문을 문서에 요약만 남기고 원본 증거를 제외하는 방안은 문서 가독성은 높지만 원본 검증 세부를 잃어 리뷰 분쟁 시 사실 확인 근거가 약해져 기각했다.
