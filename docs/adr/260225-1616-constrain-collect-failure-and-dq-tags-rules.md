# ADR-260225-1616: Constrain collect failure and dq_tags rules

## Created At

2026-02-25 16:16 KST

## Status

PendingReview

## Context

DEV-017 구현에서 수집 실패 재시도 기준과 데이터 품질 태그 집계 방식이 암묵적으로 혼재되어, 운영 중 실패 처리 일관성과 결과 재현성이 떨어질 위험이 있었다. 이번 변경은 영향 범위가 작고 되돌리기 쉬운 수준에서 규칙을 명시해, 실패 처리와 태그 생성 결과를 예측 가능하게 만드는 데 목적이 있다.

## Decision

collect 실패 분류는 `TimeoutError`와 `ConnectionError`만 재시도 가능으로 간주하고 그 외 예외는 영구 실패로 처리하며, `dq_tags`는 `dq_status` 항목들에서 추출한 문자열 태그를 중복 제거 후 정렬한 값으로 정규화한다.

## Rationale

- 재시도 대상을 두 네트워크성 예외로 제한하면 일시 장애 복구 효과를 유지하면서 불필요한 반복 시도를 줄일 수 있다.
- 기타 예외를 영구 실패로 고정하면 분류 기준이 단순해져 운영 판단과 모니터링 해석이 일관된다.
- `dq_tags`를 중복 제거 및 정렬하면 동일 입력에서 항상 같은 출력이 보장되어 비교, 캐시, 테스트 안정성이 높아진다.
- 두 결정 모두 로직 경계가 명확해 향후 정책 변경 시 국소 수정으로 되돌리기 쉽다.
