{"id":"s-6tbj","uuid":"28108934-952c-4491-8ff1-ec9f3a739f13","title":"AI Agent Spec","file_path":"specs/ai_agent_spec.md","content":"Source document: `.specs/ai_agent_spec.md`\\n\\nNSC 결제/정산 데이터 플랫폼의 파이프라인 장애 자동 대응 에이전트 요구사항 SSOT.\\n\\n핵심 내용:\\n- LangGraph 상태 흐름(detect→collect→analyze→triage→propose→interrupt→execute→verify→rollback/postmortem)\\n- Human-in-the-loop 승인(approve/reject/modify/timeout)과 실행 안전장치\\n- 검증/롤백/에스컬레이션 규칙 및 도메인 검증 정책\\n- LLMOps(프롬프트 버전, 트레이싱, 평가) 및 운영 배포 기준\n","priority":0,"archived":0,"archived_at":null,"created_at":"2026-02-21 11:38:48","updated_at":"2026-02-23T05:13:23.268Z","parent_id":null,"parent_uuid":null,"relationships":[{"from":"s-6tbj","from_type":"spec","to":"s-74ly","to_type":"spec","type":"references"},{"from":"s-6tbj","from_type":"spec","to":"s-9rtn","to_type":"spec","type":"references"}],"tags":["ai-agent","source:.specs","spec"]}
{"id":"s-74ly","uuid":"e4869510-280f-4475-8df9-476329ce7a73","title":"Data Contract (Agent Input SSOT)","file_path":"specs/s-74ly_data_contract_agent_input_ssot.md","content":"Source document: `.specs/data_contract.md`\n\nDEV-001 기준으로, 에이전트(`detect.py`, `collect.py`)가 실제로 읽는 컬럼만 SSOT로 고정한다.\n\n## `gold.pipeline_state`\n- `pipeline_name`: 파이프라인 필터\n- `status`: 장애 판정 (`success`, `failure`)\n- `last_success_ts`: 컷오프 지연 판단\n- `last_processed_end`: downstream 하드 게이트 판정 (`pipeline_b`, `pipeline_c`)\n- `last_run_id`: fingerprint 생성/추적\n\n## `silver.dq_status`\n- `source_table`: 점검 대상 테이블 식별\n- `dq_tag`: DQ 태그 기반 트리거 분기\n- `severity`: 임계 우선순위 판단 (`CRITICAL` 우선)\n- `run_id`: 최신 run_id 필터\n- `window_end_ts`: 최근 윈도우 필터\n- `date_kst`: 파티션 필터\n\n## `gold.exception_ledger`\n- `severity`: CRITICAL 필터\n- `domain`: `dq` 필터 (`detect` / `collect` 공통)\n- `exception_type`: 예외 유형 분류\n- `source_table`: 발생 소스 추적\n- `metric`: 메트릭 식별\n- `metric_value`: 메트릭 값\n- `run_id`: 신규 예외 판정 기준\n- `generated_at`: 최근 예외 시각 필터\n\n## `silver.bad_records`\n- `source_table`: 위반 소스 테이블\n- `reason`: 위반 사유/필드 추론 근거\n- `record_json`: 원본 레코드 값\n- `run_id`: 분석 run_id 추적\n- `detected_date_kst`: 분석 파티션 필터\n\n`silver.bad_records.reason` 포맷은 **현재 가정 + 확인 필요** 상태로 유지:\n- 현재 가정: `reason`은 `field`, `rule`, `detail` 키가 들어간 구조 문자열(예: JSON 문자열)\n- `field` 추출이 불확실할 때 fallback: `field=\"unknown\"`\n- `reason` 파싱 실패 또는 `field` 키 부재는 수집/분석 경로에서 확인 후 보강 대상으로 관리\n","priority":0,"archived":0,"archived_at":null,"created_at":"2026-02-23 05:13:19","updated_at":"2026-02-23T05:13:19.382Z","parent_id":null,"parent_uuid":null,"relationships":[],"tags":["data-contract","source:.specs","spec"]}
{"id":"s-9rtn","uuid":"c5f8124a-e054-45b5-9da5-35026a6c4a70","title":"Runtime Config","file_path":"specs/s-9rtn_runtime_config.md","content":"Source document: `.specs/runtime_config.md`\n\n## Databricks Job ID 설정 위치\nDatabricks 실행기가 파이프라인별 올바른 Job을 호출하려면 `config/databricks_jobs.yaml`에 Job ID를 설정한다.\n\n- 키 구조: `jobs.<pipeline>.<action>`\n- 현재 필수 파이프라인: `pipeline_silver`, `pipeline_b`, `pipeline_c`, `pipeline_a`\n- 현재 필수 액션: `refresh`\n- 값 타입: 정수(`int`) Job ID만 허용\n\n운영 환경 변경 시에는 코드 수정 없이 `config/databricks_jobs.yaml`의 Job ID만 갱신한다.\n","priority":0,"archived":0,"archived_at":null,"created_at":"2026-02-23 05:13:19","updated_at":"2026-02-23T05:13:19.382Z","parent_id":null,"parent_uuid":null,"relationships":[],"tags":["runtime-config","source:.specs","spec"]}
